<!DOCTYPE html>
<html lang="fr">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Eliazoura.fr - NodeJS / Express Server</title>
   <style>
      body {
         font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
         line-height: 1.6;
         margin: 0;
         padding: 2rem;
         background: #f5f5f5;
         color: #333;
      }

      .container {
         max-width: 800px;
         margin: 0 auto;
         background: #fff;
         padding: 2rem;
         border-radius: 8px;
         box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      h1 {
         color: #2c3e50;
         margin-bottom: 1rem;
      }

      .info-grid {
         display: grid;
         grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
         gap: 1rem;
         margin-top: 2rem;
      }

      .info-card {
         background: #f8f9fa;
         padding: 1rem;
         border-radius: 6px;
         border: 1px solid #dee2e6;
      }

      .info-card h2 {
         color: #3498db;
         margin-top: 0;
         font-size: 1.2rem;
      }

      .endpoints {
         margin-top: 2rem;
      }

      .endpoint {
         background: #e9ecef;
         padding: 0.5rem;
         margin: 0.5rem 0;
         border-radius: 4px;
         font-family: monospace;
      }
   </style>
</head>

<body>
   <div class="container">
      <h1>Eliazoura.fr - NodeJS / Express Server</h1>

      <div class="info-grid">
         <div class="info-card">
            <h2>Server Information</h2>
            <p>Version: <span id="version">1.0.0</span></p>
            <p>Node.js: <span id="nodeVersion">Chargement...</span></p>
            <p>Environment: <span id="environment">Chargement...</span></p>
         </div>
         <div class="info-card">
            <h2>Status</h2>
            <p>Status: <span id="status">Running</span></p>
            <p>Uptime: <span id="uptime">Chargement...</span></p>
            <p>Memory Usage: <span id="memory">Chargement...</span></p>
         </div>
      </div>

      <div class="endpoints">
         <h2>Available Endpoints</h2>
         <div id="endpointsList">Chargement...</div>
      </div>
   </div>

   <script>
      // Récupération des informations du serveur
      fetch('/api/server-info')
         .then(response => {
            if (!response.ok) {
               throw new Error(`Erreur HTTP : ${response.status}`);
            }
            return response.json();
         })
         .then(data => {
            document.getElementById('nodeVersion').textContent = data.nodeVersion;
            document.getElementById('environment').textContent = data.environment;
            document.getElementById('uptime').textContent = data.uptime;
            document.getElementById('memory').textContent = data.memoryUsage;

            // Affichage des endpoints
            const endpointsList = document.getElementById('endpointsList');
            endpointsList.innerHTML = ''; // On vide le contenu "Chargement..."
            data.endpoints.forEach(endpoint => {
               const div = document.createElement('div');
               div.className = 'endpoint';
               div.textContent = `${endpoint.method} ${endpoint.path}`;
               endpointsList.appendChild(div);
            });
         })
         .catch(error => {
            console.error('Erreur lors de la récupération du server-info :', error);
            document.getElementById('endpointsList').innerHTML =
               '<p style="color:red;">Erreur de chargement des endpoints</p>';
         });
   </script>
</body>

</html>